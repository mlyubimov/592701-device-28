const popupFeedback=document.querySelector(".popup__write-us"),popupFeedbackOpen=document.querySelector(".contacts__link"),popupFeedbackForm=document.querySelector(".popup__write-us .write-us-form"),name=document.getElementById("write-us__username"),email=document.getElementById("write-us__email"),text=document.getElementById("write-us__textarea"),popupFeedbackSubmit=document.querySelector(".write-us__btn"),popupFeedbackClose=document.querySelector(".write-us-form .popup__close"),popupMap=document.querySelector(".popup__map"),popupMapContainer=document.querySelector(".popup__map .popup-container"),linkMap=document.querySelector(".link-map"),search=document.querySelector(".search-form__btn"),searchInput=document.getElementById("search-form__input"),afterSearch=document.querySelector(".user-navigation__entrance .footer-item"),productArticleImg=document.querySelectorAll(".product__img--new");if(popupFeedback){const e=()=>{popupFeedback.classList.remove("popup--none"),document.body.classList.add("hidden-overflow"),"flex"==window.getComputedStyle(popupFeedback,null).display&&document.addEventListener("click",e=>{let a=e.target;a==popupFeedbackForm||popupFeedbackForm.contains(a)||a==popupFeedbackOpen||t()}),window.localStorage&&(name.value=localStorage.getItem("name"),email.value=localStorage.getItem("email"))},t=()=>{popupFeedback.classList.add("popup--none"),document.body.classList.remove("hidden-overflow"),name.classList.remove("invalid"),email.classList.remove("invalid"),text.classList.remove("invalid")};popupFeedbackOpen.addEventListener("click",t=>{t.preventDefault(),e()}),popupFeedbackClose.onclick=(()=>{t()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t()}),popupFeedbackSubmit.onclick=(()=>{name.checkValidity()?(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(name.classList.add("invalid"),popupFeedback.classList.add("write-us--alert"),setTimeout(()=>{popupFeedback.classList.remove("write-us--alert")},500)),email.checkValidity()?(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(email.classList.add("invalid"),popupFeedback.classList.add("write-us--alert"),setTimeout(()=>{popupFeedback.classList.remove("write-us--alert")},500),localStorage.setItem("name",name.value)),text.checkValidity()||(text.classList.add("invalid"),popupFeedback.classList.add("write-us--alert"),setTimeout(()=>{popupFeedback.classList.remove("write-us--alert")},500),localStorage.setItem("email",email.value))}),name.oninput=(()=>{name.classList.contains("invalid")&&name.classList.remove("invalid")}),email.oninput=(()=>{email.classList.contains("invalid")&&email.classList.remove("invalid")}),text.oninput=(()=>{text.classList.contains("invalid")&&text.classList.remove("invalid")})}if(popupMap){const e=()=>{popupMap.classList.remove("popup--none"),document.body.classList.add("hidden-overflow"),"flex"==window.getComputedStyle(popupMap,null).display&&document.addEventListener("click",e=>{let a=e.target;a==popupMapContainer||popupMapContainer.contains(a)||a==linkMap||t()})},t=()=>{popupMap.classList.add("popup--none"),document.body.classList.remove("hidden-overflow")};document.querySelector(".link-map").onclick=(t=>{t.preventDefault(),e()}),document.querySelector(".popup__map .popup__close").onclick=(()=>{t()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t()})}if(productArticleImg){let e=0,t=productArticleImg.length;for(;e<t;){let t=[productArticleImg[e].querySelector("img").getAttribute("alt").split(" ",1).toString(),"нового товара",productArticleImg[e].querySelector("img").getAttribute("alt").split(" ").slice(1).join(" ")];productArticleImg[e].querySelector("img").setAttribute("alt",t.join(" ")),e++}}search&&(search.onfocus=(()=>{searchInput.classList.add("search-border")}),search.onblur=(()=>{searchInput.classList.remove("search-border")}));